<navigation-bar title="{{isView ? '打卡详情' : '提交打卡'}}" back="{{true}}" color="black" background="#FFF"></navigation-bar>
<view class="checkin-container">
  <view class="header">
    <text class="title">{{isView ? '打卡详情' : '提交打卡'}}</text>
  </view>

  <scroll-view scroll-y class="form-scroll" type="list">
    <view class="task-card" wx:if="{{task}}">
      <view class="task-title">{{task.title}}</view>
      <view class="task-desc">{{task.description}}</view>
      <view class="task-deadline">截止日期：{{task.deadline}}</view>
    </view>

    <view class="form">
      <view class="form-item">
        <text class="label">打卡日期</text>
        <view class="date-picker">
          <picker mode="date" value="{{form.date}}" start="2020-01-01" end="2030-12-31" bindchange="onDateChange" disabled="{{isView}}">
            <view class="picker-text">{{form.date}}</view>
          </picker>
        </view>
      </view>

      <view class="form-item">
        <text class="label">打卡内容<text class="required">*</text></text>
        <textarea 
          class="textarea" 
          placeholder="请输入今日打卡内容" 
          value="{{form.content}}"
          bindinput="onContentInput"
          disabled="{{isView}}"
        ></textarea>
      </view>

      <view class="form-item">
        <text class="label">训练内容<text class="required">*</text></text>
        <textarea 
          class="textarea" 
          placeholder="请输入今日训练内容" 
          value="{{form.training}}"
          bindinput="onTrainingInput"
          disabled="{{isView}}"
        ></textarea>
      </view>

      <view class="form-item">
        <text class="label">备注<text class="required">*</text></text>
        <textarea 
          class="textarea" 
          placeholder="请输入备注信息" 
          value="{{form.remark}}"
          bindinput="onRemarkInput"
          disabled="{{isView}}"
        ></textarea>
      </view>
    </view>

    <view class="submit-section" wx:if="{{!isView}}">
      <button class="submit-btn" bindtap="handleSubmit" disabled="{{loading}}">提交打卡</button>
    </view>
    
    <!-- 底部安全区域 -->
    <view class="safe-area-bottom"></view>
  </scroll-view>
</view> 