# 微信小程序从'0'到上线
作业题目：
借助AI实现一款完整软件的开发  
作业内容：  
借助DeepSeek、kimi、豆包或cursor等AI编程助手，实现一款完整软件的开发。  
要求：  
1.具备至少4个功能，例如增、删、改、查。   
2.具备图形化界面，非控制台程序，可以是Web应用、手机应用、微信小程序等等。   
3.主题不限，语言不限，例如可以是课程表应用、ToDo任务列表应用、游戏类软件等等。    
4.提交完整代码或github/gitee链接，附详细说明文档，说明使用AI及个人实操的完整过程，4项功能分别如何实现，文档中需呈现最终软件运行效果截图。   
5.严禁抄袭，体现个人创意及独立思考能力。    

截止时间： 2025-04-13 23:59:59
## 一、 实验目的
本实验旨在设计并开发一款关于中山大学龙舟队训练打卡小程序，帮助队长和队员记录每次训练的出勤情况、训练内容以及运动成绩。通过本小程序，教练和队长可以更方便地管理队员训练情况，队员也能自主记录和查看自己的训练记录，促进队伍的管理和提高整体训练水平。

## 二、 实验背景和现状
### 背景
中山大学龙舟队的队员分布三校区五校园，隶属于各个专业，涵盖多个年级，人员管理不方便，对于各种资料填写、打卡、人员管理等多方面的需求，需要一款软件可以集成上述功能以实现高效的队伍管理。
### 现状
校龙舟队的管理包括人员信息、训练考勤等内容，需要使用多个软件实现多个功能需要  
打卡记录、比赛信息管理、队员信息管理使用共享表格自己填写    
集训使用定位小程序打卡  
桨位赛统计需要备忘录登记    
跑步截图需要在聊天中发截图  
等等...     
<div align=center><img src="README_images\4353af26cbac11412ab3eab5cff6411.png"></div>
因此，基于功能需求的碎片化，需要一款软件可以集成上述功能，以服务体育队的管理需求。  

## 三、 项目介绍
### 核心功能
1. 用户账户管理   
支持注册和登录功能  
用户可设置和修改个人信息  
三级权限管理：管理员、队长、队员  
2. 打卡任务管理   
队长可创建和管理打卡任务  
支持设置任务类型（非集训/集训上午/集训下午）  
可设置打卡时间范围（开始时间和截止时间）  
支持按周和特殊时期（如寒训/暑训）进行时间管理 
2. 训练打卡功能   
不同任务类型支持不同打卡内容   
非集训打卡支持记录六个训练动作及内容  
集训打卡包含训练内容、备注和图片凭证  
支持上传图片凭证，记录训练过程  
3. 个人中心功能   
展示个人基本信息  
查看个人打卡历史记录  
管理个人信息设置  
浏览队员档案和队伍荣誉  
队长可进入特殊管理模式  
4. 队员管理功能   
展示队员档案，包含队员基本信息  
按队员ID排序展示所有队员信息  
统计队员状态，显示在训人数  
队长可修改和管理队员信息  
5. 队伍荣誉记录   
记录比赛名称、时间、地点、成绩等信息  
关联参与比赛的队员ID  
队长可发布和管理比赛荣誉  
按时间排序展示所有荣誉  
6. 数据统计与排行榜   
统计队员打卡频率和训练情况  
生成排行榜，激励队员参与训练  
展示排名和相关数据  
### 模型设计  
1.  user用户  
```
{   
  "_id": "用户ID",    
  "openid": "微信openid",   
  "name": "用户姓名",   
  "studentId": "学号",  
  "gender": "性别",   
  "college": "学院",    
  "grade": "年级",  
  "role": "角色(admin/captain/member)",   
  "memberId": "队员编号",   
  "memberStatus": "队员状态",   
  "testLevel": "测试水平",      
  "paddleSide": "左右桨",   
  "joinDate": "入队时间",   
  "competitions": ["参赛记录ID数组"],   
  "birthday": "生日",   
  "height": "身高",   
  "weight": "体重",   
  "phone": "手机号",    
  "createTime": "创建时间",   
  "updateTime": "更新时间"    
}   
```
2.  task任务  
```
{   
  "_id": "任务ID",    
  "title": "任务标题",    
  "description": "任务描述",    
  "week": "周次(1-18周/寒训/暑训)",   
  "checkinType": "打卡类型(非集训/集训上午/集训下午)",    
  "startDateTime": "开始时间",    
  "endDateTime": "截止时间",    
  "creatorId": "创建者ID",    
  "creatorName": "创建者姓名",    
  "participants": ["参与者ID数组"],   
  "status": "任务状态",   
  "createTime": "创建时间",   
  "updateTime": "更新时间"    
}   
```
3.  checkin打卡记录   
```
{   
  "_id": "打卡记录ID",    
  "taskId": "关联任务ID",   
  "userId": "用户ID",   
  "userName": "用户姓名",   
  "date": "打卡日期",   
  "isTraining": "是否集训打卡",   
  "exercises":  
  [    
    {"name": "训练动作名称", "content": "训练内容"}   
  ],    
  "trainingContent": "集训内容",      
  "remark": "备注信息",   
  "imageUrl": "图片URL",    
  "createTime": "创建时间",   
  "updateTime": "更新时间"    
}   
```
### 前端技术架构 
1. 框架与技术栈   
核心框架：微信小程序原生框架（WXML + WXSS + JS）  
UI组件库：小程序原生组件 + 自定义组件 
状态管理：App全局状态 + 页面数据  
API调用：封装的云函数调用接口 
2. 目录结构设计   
```
├── pages/                 // 页面文件夹   
│   ├── index/             // 首页(任务列表)    
│   ├── login/             // 登录页面  
│   ├── register/          // 注册页面  
│   ├── checkin/           // 打卡页面  
│   ├── task/              // 任务详情页  
│   ├── task-manager/      // 任务管理页  
│   ├── profile/           // 个人中心  
│   ├── members/           // 队员列表  
│   ├── member-detail/     // 队员详情  
│   ├── ranking/           // 排行榜页面  
│   └── ...                // 其他功能页面  
├── components/            // 组件文件夹  
│   ├── navbar/            // 自定义导航栏  
│   ├── task-card/         // 任务卡片组件  
│   └── ...                // 其他组件  
├── images/                // 图片资源  
├── utils/                 // 工具函数  
│   ├── cloud.js           // 云函数调用封装  
│   ├── util.js            // 通用工具函数  
│   └── ...                // 其他工具  
├── app.js                 // 应用逻辑  
├── app.json               // 全局配置  
└── app.wxss               // 全局样式  
```
3. 页面组织与路由   
基础路由：通过app.json中的pages数组配置页面路由   
TabBar设计：首页(打卡)、排行榜、个人中心三栏式设计  
页面间通信：URL参数传递 + 全局状态共享  
4. 组件化设计   
UI组件：封装常用UI元素为独立组件，如任务卡片、自定义导航栏等  
业务组件：根据业务场景封装特定组件，如打卡表单、排行榜项等  
组件通信：采用属性传递(props)和事件冒泡机制   
5. 数据流管理   
全局状态：在app.js中的globalData存储用户信息、登录状态等全局数据  
页面状态：各页面data对象管理页面内部状态  
缓存使用：使用wx.setStorageSync和wx.getStorageSync进行数据持久化  
状态更新策略：单向数据流，通过setData进行视图更新   
### 后端技术架构  
1. 云开发基础设施   
云函数：使用微信云开发云函数，基于NodeJS环境  
云数据库：基于MongoDB的文档型数据库   
云存储：用于存储用户上传的图片等资源    
2. 云函数模块设计   
```
cloudfunctions/ 
├── auth/                  // 认证相关云函数  
│   ├── login              // 登录处理  
│   ├── register           // 注册处理  
│   └── ...                // 其他认证功能  
├── user/                  // 用户相关云函数  
│   ├── getUserInfo        // 获取用户信息  
│   ├── updateUserInfo     // 更新用户信息  
│   └── ...                // 其他用户相关功能  
├── task/                  // 任务相关云函数  
│   ├── createTask         // 创建任务  
│   ├── getTaskList        // 获取任务列表  
│   ├── getTaskDetail      // 获取任务详情  
│   └── ...                // 其他任务相关功能  
├── checkin/               // 打卡相关云函数  
│   ├── submitCheckin      // 提交打卡  
│   ├── getCheckinHistory  // 获取打卡历史  
│   └── ...                // 其他打卡相关功能  
└── team/                  // 团队相关云函数  
    ├── getMemberList      // 获取队员列表  
    ├── updateMember       // 更新队员信息  
    └── ...                // 其他团队相关功能  
```
3. 云函数实现策略   
权限控制：基于用户身份（管理员/队长/普通队员）实现功能访问控制  
事务处理：保证数据一致性，使用数据库事务处理关键操作    
错误处理：统一的错误处理机制，返回前端友好提示    
逻辑复用：提取公共逻辑到独立模块，降低代码重复率    
4. 云数据库设计   
集合设计：    
users：用户信息集合，存储用户基本信息   
tasks：任务集合，存储打卡任务信息   
checkins：打卡记录集合，存储用户打卡数据    
teams：队伍信息集合，存储龙舟队基本信息   
competitions：比赛集合，存储比赛及荣誉信息    
索引策略：针对频繁查询字段建立索引，优化查询性能    
数据关联：通过ID引用实现集合间的关联关系    
### 关键模块    
1. 用户认证模块：处理用户注册、登录和权限管理      
2. 任务管理模块：创建、更新和删除打卡任务  
3. 打卡记录模块：记录和查询训练数据  
4. 队员管理模块：管理队员信息和档案  
5. 荣誉记录模块：记录和展示比赛成绩  
### 创新点与应用价值
1. 集成化管理：将原本分散在多个平台的功能整合到一个小程序中，提高管理效率
定制化训练记录：根据不同训练类型提供不同的打卡内容，满足实际需求，提高管理效率
2. 多角色权限管理：为不同身份的用户提供差异化功能，确保数据安全
3. 数据可视化：准确记录每次训练内容和表现，通过排行榜和统计功能，激励队员参与训练
4. 历史记录追溯：完整记录训练和比赛历史，通过荣誉记录和排行榜功能增强队伍凝聚力，形成队伍文化传承

## 四、 软件开发准备
### 注册微信小程序账号
在[微信小程序官网](https://mp.weixin.qq.com/wxamp/)
根据指引使用小程序注册个人账号

注册成功进入下列界面，后续小程序上线需要使用
![](README_images\2025-03-28221203.png)

### 使用微信小程序开发者工具创建项目模板
[下载微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)   
进入微信开发者工具，创建模板（选择空模板）
![](README_images\2025-03-28221233.png)

### 使用github代码仓库管理
创建Github仓库管理代码
Git仓库可以保管多个版本的代码
即时备份，防止代码修改过多无法找回

使用Vscode+Git+Github进行管理，操作简单
![](README_images\2025-03-28221827.png)

### 下载Cursor 利用AI辅助开发
下载Cursor [官网](https://www.cursor.com/cn/settings)
建议下载旧版本，可以利用新账号免费使用五十次的机会无限续杯  
无限续杯参考教程 [Cursor无限免费使用](https://gitcode.com/gh_mirrors/go/go-cursor-help?isLogin=1#%F0%9F%93%A6-%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85) 

下载完进入Cursor ![](README_images\2025-03-28224919.png)
注册并登录Cursor账号
选择Open project进入刚才小程序创建的项目
## 五、 软件开发初尝试
### 利用cursor创建项目大体框架
打开Cursor的composer进行交互    
将简单的需要告诉Cursor，让他直接代理为你写代码  
输入需求：   
要求：  
1.你是一个经验丰富的UI工程师，设计风格简介明朗  
2.已经初始化好了微信小程序的项目目录，在项目下进行代码填充  
3.小程序的界面有一个任务发布，还有一个可以打卡的按钮    
4.用户可以点击按钮进行打卡，填写个人信息    

Cursor自动在模板的基础上补全了代码  
![](README_images\2025-03-29212147.png)    
并且可在微信小程序的调试器观察到程序运行  
### 后端部署使用微信云开发服务
微信小程序云开发对初学者非常友好！  
后端部署较简单，并且发布上线也不需要配置域名等东西  
在这里创建数据库和云函数    
![](README_images\2025-03-29232134.png)    
### 安装node.js和npm支持语言
[下载node.js](https://nodejs.org/zh-cn)
验证下载成功如图    
![](README_images\2025-03-30000644.png)
此时一切就已经准备就绪，只需要发挥你的奇思妙想和Cursor的大模型  
复制粘贴即可创建出你想要的小程序
## 六、 正式开发软件功能设计
### 打卡任务tasks设计

打卡task设计    
1.时间选项：第1-18周/寒训/暑训  
2.类型选项：非集训/集训上午/集训下午    
3.设置打卡时间：设置打卡起始时间设置和打卡截止时间设置    

### 打卡checkins设计
打卡checkin设计     
类型选择“非集训”时的打卡内容：      
1.训练动作一：      
  训练内容：        
2.训练动作二：      
  训练内容：    
3.训练动作三：      
  训练内容：        
4.训练动作四：      
  训练内容：        
5.训练动作五：      
  训练内容：        
6.训练动作六：      
  训练内容：    
7.备注信息：    
8.添加图片凭证：    

打卡类型选择"集训上午"或者"集训下午"时的打卡内容：  
1.训练内容：    
2.备注信息：    
3.添加图片凭证：    

### 用户个人中心设计
个人中心界面   
1.基本信息  
1.个人打卡历史记录  
2.个人信息设置  
3.队员档案  
4.队伍荣誉  
5.队长管理  
6.关于和退出登录设置    

### 用户的个人设置界面
从上到下依次是:     
1.基本信息：姓名、学号、性别、学院、年级    
2.队员信息：ID、队员状态、测试水平、左右桨、入队时间、参赛记录  
3.其他信息设置：密码、生日、身高、体重、手机号  
4.注意密码的显示样式    
其中，按照注册时间顺序的编号，从1开始；队员状态...

### 排行榜设计
根据task的类型（时间周期和打卡类型）进行筛选  
按照打卡次数进行排序  
前三名突出强调样式  

### 个人打卡历史记录
显示每一条打卡记录，并且可以点击查看详情    
整体浏览时只显示日期、打卡周期、打卡类型    
内容等详细信息点击查看  

### 队长管理 
1.队长模式的验证密码  
2.队长可以管理打卡任务（增删改查）  
3.队长使用查看用户打卡记录功能，在用户列表处，当点击用户时，应该跳转到对应用户的打卡历史记录  
4.队长可以管理队员的个人信息设置，并且所有内容都可修改  
5.发布比赛荣誉  

### 队员档案
1.每个队员为一个card，所有队员按照队员ID排序，整体浏览时为用户列表样式，每个card只显示user的姓名、学院、年级、队员状态  
2.点击card可以查看队员的个人介绍，显示出队员的基本信息和队员信息（基本信息：姓名、学号、性别、学院、年级。队员信息：ID、队员状态、测试水平、左右桨、入队时间、参赛记录）  
3.根据user的队员状态进行统计，队员档案界面上方增加显示，第二行：“目前在训x人”。第二行：“队员档案自2025年创建小程序开始统计“。 

### 队伍荣誉
1.创建一个比赛的数据库，包含比赛名称、比赛时间、比赛地点、比赛成绩、比赛图片、参与者（与队员的ID关联）  
2.在队长管理模式下，可以对比赛进行增删改查  
3.发布后的比赛信息显示在队伍荣誉中的card  
4.队伍荣誉为card，所有荣誉按照时间排序，整体浏览时card只显示比赛名称、比赛成绩、比赛时间  
5.点击card可以查看荣誉的详细信息，包含比赛名称、比赛时间、比赛地点、比赛成绩、比赛图片、参与者（与队员的ID关联）  
6.队员的参赛记录也可以显示比赛名称和比赛成绩  

## 七、 用户使用手册
### 1.注册并登录  
第一次使用时注册账号，注册时设置的信息不可修改，使用个人真实信息进行填写  
登录时输入学号和密码进行登录  
<div align=center><img src="README_images\Snipaste_2025-04-06_21-37-06.png"></div>

### 2.个人中心界面

个人中心界面可显示信息、打卡历史记录、队伍档案、队长管理模式、退出登录等功能  
点击对应选项即可进入相应界面  
<div align=center><img src="README_images\7e23835d3acfedd2184e9d692340dc3.jpg"></div>

#### 2.1 个人打卡历史记录  

查看历史所有打卡记录，点击即可查看相应的打卡内容详情  
<div align=center><img src="README_images\Snipaste_20250406_21_48_32.png"></div> 

#### 2.2 队员档案    

显示所有队员的个人基本信息，点击队员可查看队员的详细个人介绍  
<div align=center><img src="README_images\Snipaste_20250406_21_51_10.png"></div>

#### 2.3 个人信息设置  

可修改个人的部分信息，其他信息修改需要联系队长  
更换头像和重设信息后需要点击保存设置生效  
<div align=center><img src="README_images\Snipaste_20250406_21_52_38.png"></div>

### 3.任务打卡界面
显示已发布的所有任务，包括已打卡、未打卡、已截止、未开始等任务，显示任务的基本信息
#### 3.1 进行打卡 

点击任务进行打卡，点击参与任务，填写当天训练内容，提交打卡  

<div align=center><img src="README_images\ab8e18782fe2944aa697f48a4dbfdce.jpg"></div>

#### 3.2 查看打卡 

打卡完成后，回到任务打卡界面，打卡任务状态显示完成，再次点击可查看任务，也可以点击参与者的头像查看他人打卡内容详情  
<div align=center><img src="README_images\af835aff372e708bfe46062748257c9.jpg"></div>

### 4.排行榜功能  

排行榜可重点突出前三名的成绩，并展示所有已打卡成员的打卡记录  
排行榜还可按照任务的不同类型进行筛选  
<div align=center><img src="README_images\Snipaste_20250406_21_59_57.png"></div>

### 5.队长管理模式  

队长管理模式需要密码进行验证  
进行队长管理模式后，按使用不同功能跳转到对应界面，对任务、队员、打卡等具有增删改查的权限  
<div align=center><img src="README_images\Snipaste_20250406_22_02_20.png"></div>


## 八、 小程序上线
### 微信开发平台资质审核  
提交相关资料在微信小程序官网进行审核、备案、认证，即可将小程序上线  
<div align=center><img src="README_images\2025-03-31230440.png"></div> 

<div align=center><img src="README_images\屏幕截图2025-04-10_092144.png"></div>  

### 在开发者工具上传代码  
右上方上传按钮  
<div align=center><img src="README_images\2025-03-31230503.png"></div> 

### 发布版本
上传代码完成，即可在小程序官网的版本管理对项目进行管理  
<div align=center><img src="README_images\2025-03-31230531.png"></div>   

### 使用成员管理和生成小程序码
对于测试版本，可在小程序官网添加白名单人员进行访问  
<div align=center><img src="README_images\Snipaste_20250410_09_29_20.png"></div>

对于上线版，可生成小程序码进行分享，所有人可进行使用  
<div align=center><img src="README_images\Snipaste_20250410_09_30_20.png"></div>

## 九、 软件优化
### 小程序体验版收集反馈
- [x]  头像和图片显示  
- [x]  过了截止日期只能显示“查看打卡”不能再打卡了  
- [x]  任务详情删除去“截止日期”（打卡时间范围的功能已经体现了）、删除“参与人数”（参与者（人数）已经实现了）  
- [x]  排行榜的前三名背景高度调整小一点，使得排行榜的前端界面显示美观  
- [x]  最后调整界面和字体格式  
- [x]  参与任务但没完成打卡就退出，不能视为已经参与任务，只有完成打卡才算参与任务  
- [x]  我无法删除别人创建的任务，我删除别人创建的任务显示“删除失败”  
- [x]  任务打卡界面：每一个任务右下角的按钮“点击任务参与”或“已参与”取消，不需要显示，其他保持不变  
- [x]  队员档案查看不需要队长权限，显示“权限不足，只有队长可以查看”  
- [x]  队长模式下的打卡任务管理界面设置为可滑动的  
- [x]  队员档案底部有问题  
- [x]  密码一栏的隐藏和显示  
- [x]  登录界面填写密码采用隐藏的形式，输入密码时输入一个字符显示一个* 
- [x]  时间未到的用户无法打卡  

### 重新修改项目并再次发布
重复上述的上传代码、发布流程

### 正式版发布
经过二十多名队员的使用测试，版本功能完善无误  
<div align=center><img src="README_images\7f90225e382cf78e9fdb07c5521fd63.jpg"></div>  

## 十、 项目检验
扫描二维码访问小程序  
<div align=center><img src="README_images\b2331189f798929eeb966b999d05e3e.png"></div>
小程序提供测试账户    
账号:007    
密码:007007   

## 十一、 关于作业
###  1.具备至少4个功能，例如增、删、改、查。   
四项功能形成了小程序的核心功能闭环，支持龙舟队训练过程的全面数字化管理，实现了从任务发布、执行记录到数据分析的完整流程    
下面从选择几个核心实现对增删改查功能进行描述:  
1. 打卡任务发布管理（增）   
功能描述：    
队长可发布训练打卡任务，设置任务类型、时间和内容要求。  
技术实现：  
通过云函数task/createTask实现任务创建   
支持设置三种打卡类型：非集训/集训上午/集训下午    
可配置打卡时间范围（开始时间-截止时间）   
自动记录创建者信息并关联任务    

2. 历史记录管理（删）   
功能描述：    
队长可删除错误创建的打卡任务，用户可删除误提交的打卡记录。    
技术实现：    
通过task/deleteTask云函数实现任务删除     
通过checkin/deleteCheckin云函数实现打卡记录删除     
基于权限控制，确保只有创建者或管理员可执行删除操作    
执行软删除策略，保留历史数据用于审计    

3. 个人信息设置（改）   
功能描述：    
用户可编辑个人基本信息及队员信息，队长可修改所有队员资料。    
技术实现：    
通过user/updateUserInfo云函数实现信息更新   
分级权限管理，队长可修改所有队员信息    
表单验证确保数据完整性    
自动记录修改时间和操作者    

4. 训练数据查询与统计（查）   
功能描述：    
提供多维度的训练数据查询与统计功能，支持个人历史和团队排行。    
技术实现：    
通过checkin/getCheckinHistory云函数实现历史记录查询   
支持按时间、类型、用户等多维度筛选    
使用数据聚合操作生成排行榜数据    
实现分页加载优化查询性能    

###  2.具备图形化界面，非控制台程序，可以是Web应用、手机应用、微信小程序等等。   
小程序  
###  3.主题不限，语言不限，例如可以是课程表应用、ToDo任务列表应用、游戏类软件等等。    
主题和语言见项目背景介绍和软件技术分析部分  
###  4.提交完整代码或github/gitee链接，附详细说明文档，说明使用AI及个人实操的完整过程，4项功能分别如何实现，文档中需呈现最终软件运行效果截图。   
#### 使用AI过程
上文中的操作过程已经提及从0到小程序上线的全过程   
#### 个人实操过程
可见用户手册部分，尤其是 五、软件开发尝试部分  
#### 功能实现
可见用户手册部分  
#### 运行结果
可见用户手册部分  



